<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Aphrodite Component Library</title>

    <!-- Bootstrap -->
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/bootstrap-theme.min.css" rel="stylesheet">
    <script src="../js/react-with-addons.js"></script>
    <script src="../js/JSXTransformer.js"></script>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="../js/jquery-1.11.3.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/lodash.min.js"></script>
    <script src="../lib/utils.js"></script>
    <script type="text/jsx" src="../lib/aphrodite.jsx"></script>
    <script type="text/jsx" src="src/comp.jsx"></script>
    <script type="text/jsx">

  var tbody_data = [
    {
      project:"Apera",
      code:"a123",
      area:"chennai",
      sponsor:"chennai Pvt Ltd",
      budget:100000.00,
      cost:1253200.00,
      payment:2563200.00,
    },
    {
      project:"Varchas",
      code:"aa456",
      area:"Anna Nagar",
      sponsor:"chennai Pvt Ltd",
      budget:520000.00,
      cost:2563200.00,
      payment:3563200.00,
    },
    {
      project:"Aphrodite",
      code:"s789",
      area:"Tambaram",
      sponsor:"chennai Pvt Ltd",
      budget:500000.00,
      cost:1566300.00,
      payment:3645500.00,
    },
    {
      project:"Tameme",
      code:"v147",
      area:"Mogapair",
      sponsor:"chennai Pvt Ltd",
      budget:500000.00,
      cost:1569800.00,
      payment:3699800.00,
    },
    {
      project:"Payroll",
      code:"d258",
      area:"Velachery",
      sponsor:"chennai Pvt Ltd",
      budget:590000.00,
      cost:1515900.00,
      payment:3635700.00,
    },
    {
      project:"CH",
      code:"g258",
      area:"Ambattur",
      sponsor:"chennai Pvt Ltd",
      budget:590000.00,
      cost:1515900.00,
      payment:3635700.00,
    },
    {
      project:"Design",
      code:"e258",
      area:"Avadi",
      sponsor:"madras Pvt Ltd",
      budget:590000.00,
      cost:1515900.00,
      payment:3635700.00,
    },
    {
      project:"Titan",
      code:"Chrompet",
      area:"chennai",
      sponsor:"chennai Pvt Ltd",
      budget:590000.00,
      cost:1515900.00,
      payment:3635700.00,
    },
    {
      project:"Blog",
      code:"Pallavaram",
      area:"chennai",
      sponsor:"chennai Pvt Ltd",
      budget:590000.00,
      cost:1515900.00,
      payment:3635700.00,
    },
    {
      project:"Time Tracker",
      code:"t258",
      area:"Guindy",
      sponsor:"chennai Pvt Ltd",
      budget:590000.00,
      cost:1515900.00,
      payment:3635700.00,
    }
  ];

  var thead_data = [
    "Project Name",
    "Cost Code",
    "Area",
    "Sponsor",
    "Budget",
    "Total Costs",
    "Total Payments"
  ];

  var Grid = React.createClass({
    getInitialState: function() {
      return {
        pageSize: 5,
        query:'',
        filteredData: this.props.tbody_data
      }
    },
    handlePageSizeChange: function(e) {
      this.setState({
        pageSize: Number(e.target.value)
      })
    },
    doSearch:function(queryText){
      var queryResult=[];
      this.props.tbody_data.forEach(function(item){
      if(item.project.toLowerCase().indexOf(queryText) != -1 || item.area.toLowerCase().indexOf(queryText) != -1 || item.sponsor.toLowerCase().indexOf(queryText) != -1)
        queryResult.push(item);
      });
      this.setState({
        query:queryText,
        filteredData: queryResult
      })
    },
    render: function() {
      return <div className="container">
        <PerPage pageSize={this.state.pageSize} handlePageSizeChange={this.handlePageSizeChange}/>
        <SearchBox query={this.state.query} doSearch={this.doSearch}/>
        <DataTable thead_data={thead_data} tbody_data={this.state.filteredData} pageSize={this.state.pageSize}/>
      </div>
    }
  });

  React.render(<Grid thead_data={thead_data} tbody_data={tbody_data} />, document.getElementById("content"));
  </script>
  </head>
  <body>
    <div id="content"></div>
  </body>
</html>
